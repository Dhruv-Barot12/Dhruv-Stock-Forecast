<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dhruv Stock Forecast</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#f5f7fa,#c3cfe2);
  padding: 30px;
}
.container {
  max-width: 900px;
  margin: auto;
  background: white;
  padding: 30px;
  border-radius: 12px;
}
button {
  padding: 12px 24px;
  background: #1a5fb4;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
button:hover { background:#0d47a1; }
#output {
  margin-top: 20px;
  padding: 20px;
  background: #f8f9fa;
  border-left: 5px solid #1a5fb4;
}
</style>
</head>

<body>
<div class="container">
  <h1>ðŸ”® Dhruv Stock Forecast</h1>

  <h3>ðŸ“Š Support & Resistance</h3>
  <button onclick="getLevels()">Get Current Levels</button>

  <h3>ðŸ¤– AI Intraday Report</h3>
  <button onclick="getReport()">Generate AI Report</button>

  <div id="output"></div>
</div>

<script>
const API = "https://dhruv-stock-forecast.onrender.com";

async function getLevels() {
  const o = document.getElementById("output");
  o.innerHTML = "Loading...";
  const r = await fetch(API + "/support-resistance");
  const d = await r.json();
  o.innerHTML = `
    <b>Spot:</b> ${d.spot}<br>
    <b>Support:</b> ${d.support}<br>
    <b>Resistance:</b> ${d.resistance}
  `;
}

async function getReport() {
  const o = document.getElementById("output");
  o.innerHTML = "Generating AI report (10â€“20s)...";
  const r = await fetch(API + "/generate-report");
  const d = await r.json();

  if (!d.success) {
    o.innerHTML = "Error: " + (d.detail || "AI failed");
    return;
  }

  o.innerHTML = `
    <b>Spot:</b> ${d.spot}<br>
    <b>ATM:</b> ${d.atm_strike}<hr>
    ${d.report.replace(/\n/g,"<br>")}
  `;
}
</script>
</body>
</html>
