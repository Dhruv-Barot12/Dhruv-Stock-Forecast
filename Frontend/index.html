<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Paisa ‡§ï‡§Æ‡§æ‡§ì</title>

  <!-- ‚úÖ IMPORTANT FIX -->
  <link rel="stylesheet" href="/static/style.css">
</head>

<body>
  <div class="page">
    <div class="card header">
      <h1>üí∞ Paisa ‡§ï‡§Æ‡§æ‡§ì</h1>
      <p class="subtitle">
        9:30 AM High-Risk Intraday Options Insight (Nifty 50)
      </p>
    </div>

    <div class="grid">
      <!-- LEFT -->
      <div class="card actions">
        <h3>‚ö° Quick Actions</h3>

        <button class="btn blue" onclick="getSR()">
          üìä Support & Resistance
        </button>

        <button class="btn green" onclick="getTrade()">
          ‚è∞ 9:30 Trade
        </button>

        <div class="info">
          <p><b>Risk:</b> High</p>
          <p><b>Time:</b> 9:30 AM ‚Äì 3:00 PM</p>
          <p><b>Expiry:</b> 27 Jan 2026 (Monthly)</p>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="card output">
        <h3>üìà Trade Output</h3>
        <div id="output">
          Click a button to generate insights.
        </div>
      </div>
    </div>

    <p class="footer">
      Educational purpose only. Options trading involves high risk.
    </p>
  </div>

<script>
async function getSR() {
  output.innerHTML = "Loading support & resistance...";
  const r = await fetch("/support-resistance");
  const d = await r.json();

  output.innerHTML = `
    <b>Spot:</b> ${d.spot}<br>
    <b>Support:</b> ${d.support}<br>
    <b>Resistance:</b> ${d.resistance}<br>
    <small>${d.logic}</small>
  `;
}

async function getTrade() {
  output.innerHTML = "Generating 9:30 trade (10‚Äì20 sec)...";
  const r = await fetch("/generate-report");
  const d = await r.json();

  if (!d.success) {
    output.innerHTML = "AI service unavailable.";
    return;
  }

  output.innerHTML = `
    <b>Spot:</b> ${d.spot} | <b>ATM:</b> ${d.atm}<br>
    <b>Generated:</b> ${d.generated_at}
    <hr>
    <pre>${d.report}</pre>
  `;
}
</script>

</body>
</html>
