<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Paisa ‡§ï‡§Æ‡§æ‡§ì</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- CSS -->
    <link rel="stylesheet" href="/static/style.css" />
</head>
<body>

    <!-- Header -->
    <div class="header">
        <h1>üí∞ Paisa ‡§ï‡§Æ‡§æ‡§ì</h1>
        <p>9:30 AM High-Risk Intraday Options Insight (Nifty 50)</p>
    </div>

    <!-- Main Container -->
    <div class="container">

        <!-- Left Card -->
        <div class="card left-card">
            <h3>üìå Quick Actions</h3>

            <button class="btn blue" onclick="showSupportResistance()">
                Support & Resistance
            </button>

            <button class="btn green" onclick="loadTrade()">
                9:30 Trade
            </button>

            <div class="info">
                <p><strong>Risk:</strong> High</p>
                <p><strong>Time:</strong> 9:30 AM ‚Äì 3:00 PM IST</p>
                <p><strong>Expiry:</strong> Monthly</p>
            </div>
        </div>

        <!-- Right Card -->
        <div class="card right-card">

            <!-- Timing Notice -->
            <div class="notice">
                This prompt should be executed only between 9:20 AM and 9:28 AM.<br />
                ‡§Ø‡§π ‡§™‡•ç‡§∞‡•â‡§Æ‡•ç‡§™‡•ç‡§ü ‡§ï‡•á‡§µ‡§≤ ‡§∏‡•Å‡§¨‡§π 9:20 ‡§¨‡§ú‡•á ‡§∏‡•á 9:28 ‡§¨‡§ú‡•á ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§π‡•Ä ‡§ö‡§≤‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§
            </div>

            <h3>üìä Trade Output</h3>

            <pre id="output">
Click "9:30 Trade" to generate today's setup.
            </pre>

        </div>
    </div>

    <!-- JS -->
    <script src="/static/app.js"></script>

    <script>
        function showSupportResistance() {
            alert("Support & Resistance feature coming soon.");
        }

        async function loadTrade() {
            const output = document.getElementById("output");
            output.textContent = "Loading...";

            try {
                const res = await fetch("/trade");
                const data = await res.json();

                if (data.error) {
                    output.textContent = data.error;
                    return;
                }

                output.textContent =
`Spot: ${data.spot}
ATM: ${data.atm}

Generated: ${data.generated}
Weekly Expiry: ${data.weekly_expiry}
Monthly Expiry: ${data.monthly_expiry}

Final Decision: ${data.decision}
Premium: ‚Çπ${data.premium}
Expected Return: ${data.expected_return}
Risk: ${data.risk}

Actionable Summary:
${data.summary}`;
            } catch (err) {
                output.textContent = "Server error. Please try again.";
            }
        }
    </script>

</body>
</html>
